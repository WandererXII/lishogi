$board-files: (
  'wood': 'wood.png',
  'kaya1': 'kaya1.jpg',
  'kaya2': 'kaya2.jpg',
  'oak': 'oak.png',
  'painting1': 'painting1.jpg',
  'painting2': 'painting2.jpg',
  'kinkaku': 'kinkaku.jpg',
  'space': 'space.png',
  'doubutsu': 'doubutsu.png',
);

@each $board, $file in $board-files {
  .#{$board} {
    sg-board,
    #dasher_app .piece .list {
      background-image: url(../images/boards/#{$file});
    }
    @include breakpoint($mq-col2-uniboard) {
      sg-hand {
        background-image: url(../images/boards/#{$file});
      }
    }
  }
}

%grid-dot {
  content: '';
  position: absolute;
  background-color: black;
  border-radius: 50%;
  margin: -4px;
  width: 7px;
  height: 7px;
  top: 0;
  left: 0;
}

sg-squares {
  border-top: 1px solid black;
  border-left: 1px solid black;
  sq {
    border-bottom: 1px solid black;
    border-right: 1px solid black;
  }
  .preload & {
    border-width: 0;
    border-bottom: 1px solid black;
    border-right: 1px solid black;
    background-image: linear-gradient(to right, black 1px, transparent 1px),
      linear-gradient(to bottom, black 1px, transparent 1px);
    background-size: calc(100% / 9) calc(100% / 9);
  }
}

.sg-wrap {
  &.d-9x9 sg-squares sq {
    &:nth-child(31),
    &:nth-child(34),
    &:nth-child(58),
    &:nth-child(61) {
      position: relative;
      &::after {
        @extend %grid-dot;
      }
    }
  }
  &.d-5x5 {
    sg-squares sq {
      &:nth-child(7),
      &:nth-child(10),
      &:nth-child(22),
      &:nth-child(25) {
        position: relative;
        &::after {
          @extend %grid-dot;
        }
      }
    }
    &.preload sg-squares {
      background-size: calc(100% / 5) calc(100% / 5);
    }
  }
  &.d-12x12 {
    sg-squares sq {
      &:nth-child(53),
      &:nth-child(57),
      &:nth-child(101),
      &:nth-child(105) {
        position: relative;
        &::after {
          @extend %grid-dot;
        }
      }
    }
    &.preload sg-squares {
      background-size: calc(100% / 12) calc(100% / 12);
    }
  }
}

@include breakpoint($mq-col2-uniboard) {
  sg-hand {
    border: 1px solid black;
  }
  .coords-edge .main-board .sg-wrap {
    border: 1px solid black;
  }
}

.gray {
  sg-board {
    background-color: #878787; // dark squares
    sq:nth-child(even) {
      background-color: #d1d1d1; // light squares
      &.oc.dest,
      &.oc.pre-dest {
        background-color: #d1d1d1; // light squares
      }
      &.selected {
        background-color: #729377;
      }
      &.preselected,
      &.current-pre {
        background-color: #727793;
      }
      &.dest.hover {
        background-color: #98ac9b;
      }
      &.pre-dest.hover {
        background-color: #abadb8;
      }
      &.last-dest {
        background-color: #bbcd7b;
      }
    }
    sq:nth-child(-2n + 26),
    sq:nth-child(2n + 56) {
      filter: brightness(90%);
    }
  }
  .d-12x12 sg-board {
    sq[class=''] {
      background-color: unset;
      filter: unset;
    }
    sq:nth-child(even) {
      background-color: #878787; // reset dark squares
    }
    sq:nth-child(-n + 12):nth-child(even),
    sq:nth-child(n + 12):nth-child(-n + 24):nth-child(odd),
    sq:nth-child(n + 25):nth-child(-n + 36):nth-child(even),
    sq:nth-child(n + 37):nth-child(-n + 48):nth-child(odd),
    sq:nth-child(n + 49):nth-child(-n + 60):nth-child(even),
    sq:nth-child(n + 61):nth-child(-n + 72):nth-child(odd),
    sq:nth-child(n + 73):nth-child(-n + 84):nth-child(even),
    sq:nth-child(n + 85):nth-child(-n + 96):nth-child(odd),
    sq:nth-child(n + 97):nth-child(-n + 108):nth-child(even),
    sq:nth-child(n + 109):nth-child(-n + 120):nth-child(odd),
    sq:nth-child(n + 121):nth-child(-n + 132):nth-child(even),
    sq:nth-child(n + 133):nth-child(-n + 144):nth-child(odd) {
      background-color: #d1d1d1; // light squares
      &.oc.dest,
      &.oc.pre-dest {
        background-color: #d1d1d1; // light squares
      }
      &.selected {
        background-color: #729377;
      }
      &.preselected,
      &.current-pre {
        background-color: #727793;
      }
      &.dest.hover {
        background-color: #98ac9b;
      }
      &.pre-dest.hover {
        background-color: #abadb8;
      }
      &.last-dest {
        background-color: #bbcd7b;
      }
    }
  }
  #dasher_app .piece .list {
    background: #878787;
  }
  .preload sg-squares {
    background-image: none;
    background: repeating-conic-gradient(#d1d1d1 0% 25%, transparent 0% 50%) 0 / calc(200% / 9) calc(200% / 9);
    background-position: 100% 100%;
  }
  .preload.d-5x5 sg-squares {
    background: repeating-conic-gradient(#d1d1d1 0% 25%, transparent 0% 50%) 0 / calc(200% / 5) calc(200% / 5);
    background-position: 100% 100%;
  }
  .preload.d-12x12 sg-squares {
    background: repeating-conic-gradient(#d1d1d1 0% 25%, transparent 0% 50%) 0 / calc(200% / 12) calc(200% / 12);
    background-position: 100% 100%;
  }
  @include breakpoint($mq-col2-uniboard) {
    sg-hand {
      background-color: #bcbcbc;
    }
  }
}

.blue {
  sg-board {
    background-color: #617a8e; // dark squares
    sq:nth-child(even) {
      background-color: #99aec2; // light squares
      &.oc.dest,
      &.oc.pre-dest {
        background-color: #99aec2; // light squares
      }
      &.selected {
        background-color: #568270;
      }
      &.preselected,
      &.current-pre,
      &.oc.pre-dest {
        background-color: #56668c;
      }
      &.dest.hover {
        background-color: #719390;
      }
      &.pre-dest.hover {
        background-color: #7e91ac;
      }
      &.last-dest {
        background-color: #afd47e;
      }
    }
    sq:nth-child(-2n + 26),
    sq:nth-child(2n + 56) {
      filter: brightness(90%);
    }
  }
  .d-12x12 sg-board {
    sq[class=''] {
      background-color: unset;
      filter: unset;
    }
    sq:nth-child(even) {
      background-color: #617a8e; // reset dark squares
    }
    sq:nth-child(-n + 12):nth-child(even),
    sq:nth-child(n + 12):nth-child(-n + 24):nth-child(odd),
    sq:nth-child(n + 25):nth-child(-n + 36):nth-child(even),
    sq:nth-child(n + 37):nth-child(-n + 48):nth-child(odd),
    sq:nth-child(n + 49):nth-child(-n + 60):nth-child(even),
    sq:nth-child(n + 61):nth-child(-n + 72):nth-child(odd),
    sq:nth-child(n + 73):nth-child(-n + 84):nth-child(even),
    sq:nth-child(n + 85):nth-child(-n + 96):nth-child(odd),
    sq:nth-child(n + 97):nth-child(-n + 108):nth-child(even),
    sq:nth-child(n + 109):nth-child(-n + 120):nth-child(odd),
    sq:nth-child(n + 121):nth-child(-n + 132):nth-child(even),
    sq:nth-child(n + 133):nth-child(-n + 144):nth-child(odd) {
      background-color: #99aec2; // light squares
      &.oc.dest,
      &.oc.pre-dest {
        background-color: #99aec2; // light squares
      }
      &.selected {
        background-color: #568270;
      }
      &.preselected,
      &.current-pre,
      &.oc.pre-dest {
        background-color: #56668c;
      }
      &.dest.hover {
        background-color: #719390;
      }
      &.pre-dest.hover {
        background-color: #7e91ac;
      }
      &.last-dest {
        background-color: #afd47e;
      }
    }
  }
  #dasher_app .piece .list {
    background: #617a8e;
  }
  .preload sg-squares {
    background-image: none;
    background: repeating-conic-gradient(#99aec2 0% 25%, transparent 0% 50%) 0 / calc(200% / 9) calc(200% / 9);
    background-position: 100% 100%;
  }
  .preload.d-5x5 sg-squares {
    background: repeating-conic-gradient(#99aec2 0% 25%, transparent 0% 50%) 0 / calc(200% / 5) calc(200% / 5);
    background-position: 100% 100%;
  }
  .preload.d-12x12 sg-squares {
    background: repeating-conic-gradient(#99aec2 0% 25%, transparent 0% 50%) 0 / calc(200% / 12) calc(200% / 12);
    background-position: 100% 100%;
  }
  @include breakpoint($mq-col2-uniboard) {
    sg-hand {
      background-color: #8a9daf;
    }
  }
}

.blue,
.gray {
  sg-squares {
    border: none;
    sq {
      border: none;
      &::after {
        content: unset !important;
      }
    }
  }
  sg-hand {
    border: none;
  }
  &.coords-edge .main-board .sg-wrap {
    border: none;
  }
}

.natural {
  sg-board,
  dasher_app .piece .list {
    background-color: #ffd890;
  }
  @include breakpoint($mq-col2-uniboard) {
    sg-hand {
      background-color: #ffd890;
    }
  }
}

.orange {
  sg-board,
  dasher_app .piece .list {
    background-color: #f4bf57;
  }
  @include breakpoint($mq-col2-uniboard) {
    sg-hand {
      background-color: #f4bf57;
    }
  }
}

.space {
  sg-squares,
  sg-squares sq,
  &.coords-edge .main-board .sg-wrap,
  sg-hand {
    border-color: #eee;
  }
  sg-squares sq::after {
    background-color: #eee !important;
  }
  .sg-wrap.preload sg-squares {
    background-image: linear-gradient(to right, #eee 1px, transparent 1px),
      linear-gradient(to bottom, #eee 1px, transparent 1px);
  }
}

.doubutsu {
  .orientation-gote sg-board {
    background-image: url(../images/boards/doubutsu_flip.png);
  }
  sg-squares {
    border-top: 2px dashed #bb645c;
    border-left: 2px dashed #bb645c;
    sq {
      border-right: 2px dashed #bb645c;
      border-bottom: 2px dashed #bb645c;
      &::after {
        content: unset !important;
      }
    }
  }
  .preload sg-squares {
    border-bottom: 2px dashed #bb645c;
    border-right: 2px dashed #bb645c;
    background-image: none;
  }
  @include breakpoint($mq-col2-uniboard) {
    .orientation-gote sg-hand {
      background-image: url(../images/boards/doubutsu_flip.png);
    }
    sg-hand,
    &.coords-edge .main-board .sg-wrap {
      border: 2px dashed #bb645c;
    }
  }
}

.custom {
  #dasher_app .piece .list {
    background-color: var(--c-board-color, $c-bg-box);
    background-image: var(--c-board-url, none);
  }
  sg-board {
    background-color: var(--c-board-color, $c-bg-box);
    background-image: var(--c-board-url, none);
    sg-squares {
      border-top: 1px solid var(--c-grid-color, $c-font);
      border-left: 1px solid var(--c-grid-color, $c-font);
    }
    sq {
      border-bottom: 1px solid var(--c-grid-color, $c-font);
      border-right: 1px solid var(--c-grid-color, $c-font);
      &::after {
        background-color: var(--c-grid-color, $c-font) !important;
      }
    }
  }
  @include breakpoint($mq-col2-uniboard) {
    sg-hand {
      background-color: var(--c-hands-color, $c-bg-box);
      background-image: var(--c-hands-url, none);
      border: 1px solid var(--c-grid-color, $c-font);
    }
    &.coords-edge .main-board .sg-wrap {
      border: 1px solid var(--c-grid-color, $c-font);
    }
  }
  .preload sg-squares {
    border-top: unset;
    border-left: unset;
    border-bottom: 1px solid var(--c-grid-color, $c-font);
    border-right: 1px solid var(--c-grid-color, $c-font);
    background-image: linear-gradient(to right, var(--c-grid-color, $c-font) 1px, transparent 1px),
      linear-gradient(to bottom, var(--c-grid-color, $c-font) 1px, transparent 1px);
  }
  &.grid-width-0 {
    .sg-wrap {
      border-width: 0;
      sg-squares {
        border-width: 0;
        sq {
          border-width: 0;
          &::after {
            content: unset !important;
          }
        }
      }
      &.preload sg-squares {
        background-image: none;
      }
    }
  }
  &.grid-width-2 {
    .sg-wrap {
      border-width: 2px;
      sg-squares {
        border-width: 2px;
        sq {
          border-width: 2px;
          &::after {
            margin: -6px !important;
            width: 10px !important;
            height: 10px !important;
          }
        }
      }
      &.preload sg-squares {
        background-image: linear-gradient(to right, var(--c-grid-color, $c-font) 2px, transparent 2px),
          linear-gradient(to bottom, var(--c-grid-color, $c-font) 2px, transparent 2px);
      }
    }
  }
  &.grid-width-3 {
    .sg-wrap {
      border-width: 3px;
      sg-squares {
        border-width: 3px;
        sq {
          border-width: 3px;
          &::after {
            margin: -7px !important;
            width: 12px !important;
            height: 12px !important;
          }
        }
      }
      &.preload sg-squares {
        background-image: linear-gradient(to right, var(--c-grid-color, $c-font) 3px, transparent 3px),
          linear-gradient(to bottom, var(--c-grid-color, $c-font) 3px, transparent 3px);
      }
    }
  }
}

// Not too sure about this
// I believe 1px border is going to be too small for bigger (for example 4k) screens
// Can't test it tho...
@include breakpoint($mq-xx-large) {
  sg-squares,
  sg-squares sq,
  sg-hand,
  .coords-edge .main-board .sg-wrap {
    border-width: 2px;
  }
  body:not(.custom) sg-squares sq::after {
    margin: -6px !important;
    width: 10px !important;
    height: 10px !important;
  }
}
